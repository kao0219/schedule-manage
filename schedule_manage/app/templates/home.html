{% extends 'base.html' %}


{% block content %}
<div id="calendar"></div>
   
   
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    
<style>
    #calendar {
        max-width: 1000px;
        margin: 40px auto;
        padding: 20px;
        background-color: #fff8dc;
    }

    .fc-daygrid-day-number {
        text-align: left;
        padding-left: 4px;
    }

 
    .fc-toolbar.fc-header-toolbar {
        justify-content: center; /* 月日の左右に矢印 *//
    }
    
   
    
</style>
    
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const calendarEl = document.getElementById('calendar');
        if (!calendarEl) return; 
        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'ja',
            headerToolbar: {
                left: 'prev', //43~45の並びは崩さない年月の隣に左右矢印
                center: 'title',
                right: 'next'
            },

            displayEventTime: false, //カレンダーに時間表示させないようにしている
            eventDisplay: 'block', //これをいれて見出しカラーを帯で表示
            events: '/schedule/json/', 

            dateClick: function(info) {
                const clickedDate = info.dateStr;
                window.location.href = `/schedule/create?date=${clickedDate}`;
            },

            eventClick: function(info) {
                const scheduleId = info.event.id;
                window.location.href = `/schedule/${scheduleId}/`;
            },

            eventDidMount: function(info) {
                if (!info.event.extendedProps.color) {
                  info.el.style.backgroundColor = info.event.extendedProps.color;
                  info.el.style.color = 'black';
                  info.el.style.border = '1px solid #ccc';
                }
                const titleEl = info.el.querySelector('.fc-event-title');
                if (titleEl) {
                  titleEl.style.color = 'black';
                  titleEl.style.fontWeight = 'bold';
                }
            },
            dayCellContent: function(arg) {
                return arg.date.getDate();
            },
            dayCellDidMount: function(arg) {
                const day = arg.date.getDay();
                const numberEl = arg.el.querySelector('.fc-daygrid-day-number');
                if (numberEl){
                  if (day === 0) {
                    numberEl.style.color = 'red';
                  } else if (day === 6) {
                    numberEl.style.color = 'blue';
                  }
                }
            },
        });
        calendar.render();
    });
</script>    

{% endblock %}